

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>model &mdash; aiomyorm 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="connection" href="connection.html" />
    <link rel="prev" title="set_config" href="set_config.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #ff00ff" >
          

          
            <a href="index.html" class="icon icon-home"> aiomyorm
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="set_config.html">set_config</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">model</a></li>
<li class="toctree-l1"><a class="reference internal" href="connection.html">connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="field.html">field</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">aiomyorm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiomyorm.model">
<span id="model"></span><h1>model<a class="headerlink" href="#module-aiomyorm.model" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="aiomyorm.model.Model">
<em class="property">class </em><code class="sig-prename descclassname">aiomyorm.model.</code><code class="sig-name descname">Model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_new_created</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">_pk_value</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>The basic model class.</p>
<dl class="py attribute">
<dt>
<code class="sig-name descname">__table_\_</code></dt>
<dd><p>The table name of this model.If you do not set this attribute,
class name will be used by default.</p>
</dd></dl>

<dl class="py attribute">
<dt>
<code class="sig-name descname">__auto_\_</code></dt>
<dd><p>If true, fields will automatically retrieved from the table, default False.
<strong>Warnings: __auto__ dose not support sqlite.</strong></p>
</dd></dl>

<dl class="py attribute">
<dt>
<code class="sig-name descname">the field you define</code></dt>
<dd><p>All the fields you define. In class it will be field while in instance it is
the value of this field.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.aggregate">
<em class="property">async classmethod </em><code class="sig-name descname">aggregate</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="p">:</span> <span class="n">Union[str, aiomyorm.field.Field, None]</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>List<span class="p">[</span>Dict<span class="p">]</span><span class="p">, </span>Dict<span class="p">, </span>NoReturn<span class="p">]</span><a class="headerlink" href="#aiomyorm.model.Model.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – <p>aggregate function, it’s alias will be taken as <code class="docutils literal notranslate"><span class="pre">(function)__(field</span> <span class="pre">name)</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">MAX__age</span></code>.
you can use the follow aggregate function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Max</span><span class="p">(),</span> <span class="n">Min</span><span class="p">(),</span> <span class="n">Count</span><span class="p">(),</span> <span class="n">Avg</span><span class="p">(),</span> <span class="n">Sum</span><span class="p">()</span>
</pre></div>
</div>
</p></li>
<li><p><strong>group_by</strong> (<em>str</em>) – Same as sql, and only allow one field.</p></li>
<li><p><strong>kwargs</strong> – key is the alias of this aggregate field,and value is the aggregate function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If the group_by parameter is not specified, will return a dict which key is it’s alias and value is
it’s result.
If the group_by parameter is specified, will return a dict which key is the result of the group_by field
in each group, and value is a dict as same as the first situation.</p>
</dd>
</dl>
<dl>
<dt>Sample:</dt><dd><p>you can run this code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">model</span> <span class="kn">import</span> <span class="n">Max</span><span class="p">,</span><span class="n">Count</span><span class="p">,</span><span class="n">Min</span><span class="p">,</span><span class="n">Avg</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Test</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Max</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">),</span> <span class="n">minage</span><span class="o">=</span><span class="n">Min</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">),</span> <span class="n">avgage</span><span class="o">=</span><span class="n">Avg</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">),</span>
                                              <span class="n">groupnum</span><span class="o">=</span><span class="n">Count</span><span class="p">(),</span> <span class="n">group_by</span><span class="o">=</span><span class="s1">&#39;birth_place&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">pprint</span>
    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</pre></div>
</div>
<p>you will get the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;someplace&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;MAX__age&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;avgage&#39;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span> <span class="s1">&#39;groupnum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;minage&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
 <span class="s1">&#39;someplace1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;MAX__age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;avgage&#39;</span><span class="p">:</span> <span class="mf">20.5</span><span class="p">,</span> <span class="s1">&#39;groupnum&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;minage&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">},</span>
 <span class="s1">&#39;someplace3&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;MAX__age&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;avgage&#39;</span><span class="p">:</span> <span class="mf">17.0</span><span class="p">,</span> <span class="s1">&#39;groupnum&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;minage&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">}}</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.change_db">
<em class="property">classmethod </em><code class="sig-name descname">change_db</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.change_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the database this model belongs to.</p>
<p><strong>Warnings: not support sqlite</strong></p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.change_db_one_time">
<em class="property">classmethod </em><code class="sig-name descname">change_db_one_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.change_db_one_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the database one time.</p>
<p>You can use this method temporarily change the database this model
belongs in the next query or modification.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Model</span><span class="o">.</span><span class="n">change_db_one_time</span><span class="p">(</span><span class="n">newdb</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
</pre></div>
</div>
<p>This query will be performed in newdb.</p>
<p><strong>Warnings: not support sqlite</strong></p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.create_table">
<em class="property">async classmethod </em><code class="sig-name descname">create_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this table in current database.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.delete">
<em class="property">async classmethod </em><code class="sig-name descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#aiomyorm.model.Model.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete objects from database.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">filter()</span></code> and other method to filter the objects that want to delete,        just as you did in <code class="docutils literal notranslate"><span class="pre">find()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(int) Total number of objects deleted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.distinct">
<em class="property">classmethod </em><code class="sig-name descname">distinct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Add DISTINCT condition for your query.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.exclude">
<em class="property">classmethod </em><code class="sig-name descname">exclude</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#aiomyorm.model.Model.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude filter your query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – the field you wang to exclude and it’s value.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – An error occurred when argument is not a Field.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.filter">
<em class="property">classmethod </em><code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#aiomyorm.model.Model.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter your query,correspond to where key=value in sql.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Kwargs</strong> – The field you wang to filter and it’s value.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – An error occurred when argument is not a Field.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.find">
<em class="property">async classmethod </em><code class="sig-name descname">find</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Do select.This method will return a list of YourModel objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list) A list of YourModel objects.If no record can be found, will return an empty list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.find_first">
<em class="property">async classmethod </em><code class="sig-name descname">find_first</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.find_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Do select.This method will directly return one YourModel object instead of a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(Model) One YourModel object.If no record can be found, will return None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.flex_exclude">
<em class="property">classmethod </em><code class="sig-name descname">flex_exclude</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">conditions</span><span class="p">:</span> <span class="n">Tuple</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.flex_exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude your query flexibly, such as ‘&gt;’ ‘&lt;’ and so on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field you wang to exclude and it's value.</strong> (<em>The</em>) – </p>
</dd>
</dl>
<dl class="simple">
<dt>You can use the following methods:</dt><dd><p>same as <code class="docutils literal notranslate"><span class="pre">flex_filtter()</span></code></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – An error occurred when you use it in the wrong way.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.flex_filter">
<em class="property">classmethod </em><code class="sig-name descname">flex_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">conditions</span><span class="p">:</span> <span class="n">Tuple</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.flex_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter your query flexibly, such as ‘&gt;’ ‘&lt;’ and so on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conditions</strong> – The field you wang to filter and it’s value.</p>
</dd>
</dl>
<p>You can use the following methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span>               <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&gt;</span><span class="mi">100</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&gt;=</span><span class="mi">100</span><span class="p">)</span>              <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&gt;=</span><span class="mi">100</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">==</span><span class="mi">100</span><span class="p">)</span>              <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">=</span><span class="mi">100</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&lt;=</span><span class="mi">100</span><span class="p">)</span>              <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&lt;=</span><span class="mi">100</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">)</span>               <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">&lt;</span><span class="mi">100</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%a</span><span class="s1">bc%&#39;</span><span class="p">))</span>     <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span> <span class="n">LIKE</span> <span class="s1">&#39;</span><span class="si">%a</span><span class="s1">bc%&#39;</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">.</span><span class="n">start_with</span><span class="p">(</span><span class="n">abc</span><span class="p">))</span>   <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span> <span class="n">LIKE</span> <span class="s1">&#39;abc%&#39;</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">.</span><span class="n">end_with</span><span class="p">(</span><span class="n">abc</span><span class="p">))</span>     <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span> <span class="n">LIKE</span> <span class="s1">&#39;</span><span class="si">%a</span><span class="s1">bc&#39;</span>
<span class="n">flex_filter</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">Field</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>        <span class="o">--</span><span class="ow">in</span> <span class="n">sql</span><span class="o">--&gt;</span>  <span class="n">where</span> <span class="n">Table</span><span class="o">.</span><span class="n">Field</span> <span class="n">LIKE</span> <span class="s1">&#39;</span><span class="si">%a</span><span class="s1">bc%&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – An error occurred when you use it in the wrong way.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.get_db">
<em class="property">classmethod </em><code class="sig-name descname">get_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.get_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the database this model belongs to.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.get_fields">
<em class="property">classmethod </em><code class="sig-name descname">get_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.get_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the names of all fields</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.get_mapping">
<em class="property">classmethod </em><code class="sig-name descname">get_mapping</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.get_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fields mapping.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.get_primary_key">
<em class="property">classmethod </em><code class="sig-name descname">get_primary_key</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.get_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of the primary key</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.insert">
<em class="property">async classmethod </em><code class="sig-name descname">insert</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">insert_objects</span></em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#aiomyorm.model.Model.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert objects to database.</p>
<p>This method can insert multiple objects and access the database only once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>insert_objects</strong> (<a class="reference internal" href="#aiomyorm.model.Model" title="aiomyorm.model.Model"><em>Model</em></a>) – One or more object of this Model.</p>
</dd>
</dl>
<dl class="simple">
<dt>Raise:</dt><dd><p>ValueError: An error occurred when argument is not the object of this model.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(int) Affected rows.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.or_connect">
<em class="property">classmethod </em><code class="sig-name descname">or_connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.or_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect your filter br ‘OR’ rather than ‘AND’.</p>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.order_by">
<em class="property">classmethod </em><code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort query results.</p>
<p>By default, it will be sorted from small to large. You can sort it from large to small by adding ‘-‘.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – (str) The sorting basis you specified.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<span class="c1"># will sort by id from small to large</span>
<span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<span class="c1"># will sort by id from large to small</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.pk_find">
<em class="property">async classmethod </em><code class="sig-name descname">pk_find</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pk_value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.pk_find" title="Permalink to this definition">¶</a></dt>
<dd><p>Get one object by primary key.</p>
<p>You should specify the primary key in this method.
All the restrictions you have made before, except “<code class="docutils literal notranslate"><span class="pre">query()</span></code>”, will not take effect.
This method will directly return one YourModel object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pk_value</strong> – value of primary key.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Model) One YourModel object.If no record can be found, will return None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.query">
<em class="property">classmethod </em><code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Union[str, aiomyorm.field.Field, None]</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#aiomyorm.model.Model.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice the field you want to query.</p>
<p>All the query method such as <code class="docutils literal notranslate"><span class="pre">find()</span></code> will query all the fields by default,
so if you want to query all fields, just do not use this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – The field you wang to query.You can use Model.Field or the name of field.</p>
</dd>
</dl>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – An error occurred when argument is not a Field.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.remove">
<em class="property">async </em><code class="sig-name descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; NoReturn<a class="headerlink" href="#aiomyorm.model.Model.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this object from database.</p>
<dl class="simple">
<dt>Raise:</dt><dd><p>RuntimeError: An error occurred when can not find a primary key of this object.
since every object queried from the database will query primary key explicitly
or implicitly, this error will only appear when the newly created object calls
the <code class="docutils literal notranslate"><span class="pre">remove()</span></code> method, which itself is the wrong use. To delete an object without
querying in advance, use <code class="docutils literal notranslate"><span class="pre">delete()</span></code> method.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.save">
<em class="property">async </em><code class="sig-name descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; NoReturn<a class="headerlink" href="#aiomyorm.model.Model.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save this object to database.</p>
<dl class="simple">
<dt>Raise:</dt><dd><p>RuntimeError: An error occurred when failed to save this object.
AttributeError: An error occurred when primary key has been changed, which
is not allowed in this method, use <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.update">
<em class="property">async classmethod </em><code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#aiomyorm.model.Model.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update objects to database.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">filter()</span></code> and other method to filter the objects that want to update,        just as you did in <code class="docutils literal notranslate"><span class="pre">find()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(int) Total number of objects updated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="aiomyorm.model.Model.use">
<em class="property">classmethod </em><code class="sig-name descname">use</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#aiomyorm.model.Model.use" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a connection.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="connection.html" class="btn btn-neutral float-right" title="connection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="set_config.html" class="btn btn-neutral float-left" title="set_config" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, yulansp

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>